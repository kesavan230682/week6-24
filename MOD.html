<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>WOD Tracker</title>
  </head>
  <body>
    <div class="container">
      <h1 class="text-center"> WOD Tracker</h1>
    <div class="card bg-ligh p-3 n-3">
    <h3>Add new Workout of the Day</h3>
    
      <div class="row">
      <div class="mb-3 " >
        <input type="text" class="form-control" id="name" placeholder="Exercise name">
      </div>
      </div>
      <div class="row">
      <div class="mb-3 ">
        <input type="text" class="form-control" id="description" placeholder="Exercise description">
      </div>
      </div>
      <div class="row">
      <div class="mb-3 ">
        <input type="text" class="form-control" id="assignee" placeholder="Assignee">
      </div>
      </div>
      <div class="row">
      <div >
        <select class="form-select" aria-label="Default select example" id="difficulty">
          <option selected value="Beginner">Beginner</option>
          <option value="Elementary">Elementary</option>
          <option value="Advanced">Advanced</option>
          <option value="Hardcore">Hardcore</option>
        </select>


       </div>
       <button onclick='addPressed()' type="button" class="btn btn-primary mt-3">Add</button>
       
       </div>


      </div>
    
      
  
    
    <div class="card n-3 p-3 bg-light">
      <h3>The WODs</h3>
    <table class="table table-striped table-bordered table-hover">
      <thead>
        <tr>
          <th scope="col">WOD</th>
          <th scope="col">Assignee</th>
          <th scope="col">Difficulty</th>
        </tr>
      </thead>
      <tbody id="wodelement">
      </tbody>
    </table>
  </div>

  <div class="card n-3 p-3 bg-light ">
    <ul class="list-group list-group-flush">
      <li class="list-group-item" id="title">Title :</li>
      <li class="list-group-item" id="person">Assignee :</li>
      <li class="list-group-item" id="summary">Description :</li>
      <li class="list-group-item" id="status">Status :</li>
    </ul>
  </br>
    <div class="card-footer">
    <button type="button" class="btn btn-primary">Mark as Done</button>
    <button type="button" class="btn btn-primary">Delete</button>
    </div>
  </div>
</div>
</div>

<script type="text/JavaScript">
  
  var wods =[];
  var selectedItem;


  loadData();

  function loadData(){
    if (localStorage.getItem('wods') !=null){
      wods = JSON.parse(localStorage.getItem("wods"));
      refreshTable()
    }
  }



  function markDonePressed (){

    selectedItem.status = "Done";
    document.getElementById("statusdetail").innerHTML="Done";
    localStorage.setItem('wods',JSON.stringly(wods));

    

  }


  function deletePressed(){

    for (var i = 0; i < wods.length; i++){
      if(selectedItem,name == wods[i].name){
        wods.splice(i,1);
        break;
      }
    }
  

  selectedItem = null
  localStorage.setItem('wods',JSON.stringly(wods));
  refreshTable();
  document.getElementById("detailsection").setAttribute("hidden",true);
}

function refreshTable(){

  document.getElementById("wodelement").innerHTML="";

  if(wods.length>0){

    document.getElementById("tablesection").removeAttribute("hidden")
  }

  else{
  
  document.getElementById("tablesection").setAttribute("hidden", true);


  }



for(var i=0; i < wods.length; i++){


    

    var td1 = document.createElement("td");
    var td2 = document.createElement("td");
    var td3 = document.createElement("td");

    td1.innerHTML = wods[i].name;
    td2.innerHTML = wods [i].assignee;
    td3.innerHTML = wods [i].difficulty;

    var newTr = document.createElement("tr");

    

    var newTr = document.createElement("tr");

    newTr.appendChild(td1);
    newTr.appendChild(td2);
    newTr.appendChild(td3);

    document.getElementById("wodelement").appendChild(newTr);

    newTr.selectedItem = wods[i];
    newTr.addEventListner("click", function(evt){
      selectedItem = evt.currentTarget.selectedItem;




      document.getElementById("namedetail").innerHTML =selectedItem.name;
      document.getElementById("descdetail").innerHTML =selectedItem.description;
      document.getElementById("assigneedetail").innerHTML =selectedItem.assignee;
      document.getElementById("difficultydetail").innerHTML =selectedItem.difficulty;
      document.getElementById("statusdetail").innerHTML =selectedItem.status;


      


        })





    document.getElementById("name").value="";
    document.getElementById("assignee").value="";
    document.getElementById("difficulty").value="";
    document.getElementById("description").value="";

  
}


function addPressed(){

    var name = document.getElementById("name").value;
    var description = document.getElementById("description").value;
    var assignee = document.getElementById("assignee").value;
    var difficulty = document.getElementById("difficulty").value;

}
    var newItem = {

      "name":name,
      "assignee":assignee,
      "difficulty":difficulty,
      "description":difficulty,
      "status":"not done"
    }


wods.push(newItem);('wods',JSON.stringfy(wods));


    refreshTable();



    

    

    
    </script>
    <!-- Optional JavaScript; choose one of the two! -->
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
  </body>
</html>